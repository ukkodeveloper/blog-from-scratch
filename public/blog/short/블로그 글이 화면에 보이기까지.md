---
title: 블로그 글이 화면에 보이기까지
date: 2024-05-03
tags:
  - nextJs
  - 블로그
image: /images/블로그%20글이%20화면에%20보이기까지-20241003131015152.webp
summary: 블로그 글(MarkDown)이 화면에 보이기까지의 설명
published: true
---

최근 블로그를 밑바닥부터 만들었다. 블로그를 개발할 때 가장 중요한 점은 나만의 CMS를 구축하는 것이다. 그럴려면 Markdown이 웹에 렌더링되기까지 어떠한 과정을 명확히 알아야 하기에 이렇게 글로 정리하였다.

## 1. Markdown 작성: 콘텐츠의 시작점

모든 것은 Markdown 파일 작성으로 시작된다. 개발자들은 주로 Obsidian, VS Code, Typora 등의 에디터를 사용하여 Markdown을 작성한다. 이 단계에서 중요한 것은 본문과 함께 YAML Front Matter 형식의 메타데이터를 포함시키는 것이다.

```markdown
---
title: "Markdown의 장점"
date: "2024-10-01"
tags: ["markdown", "git", "static site"]
---

# Markdown의 장점

Markdown은 개발자에게 인기가 있는 포맷이다...
```

## 2. Markdown의 JSON 변환: 구조화된 데이터 생성

다음 단계는 Markdown 파일을 JSON으로 변환하는 것이다. 이 과정에서 ContentLayer가 핵심적인 역할을 한다.

### ContentLayer
1. Front Matter를 JSON 속성으로 변환
2. 본문을 HTML로 변환해 JSON의 'content' 필드에 저장

ContentLayer는 내부적으로 'remark'와 'unified' 같은 도구를 사용하여 Markdown을 HTML로 변환한다. 이 과정에서 추상 구문 트리(AST)가 생성되고 변환된다.

결과는 다음과 같은 JSON 파일이 된다:

```json
{
  "title": "Markdown의 장점",
  "date": "2024-10-01",
  "tags": ["markdown", "git", "static site"],
  "content": "<h1>Markdown의 장점</h1><p>Markdown은 개발자에게 인기가 있는 포맷이다...</p>"
}
```

## 3. Next.js의 정적 페이지 생성(SSG) 준비

JSON으로 변환된 데이터는 Next.js가 정적 페이지를 생성하는 데 사용된다. 이 과정에서 `getStaticProps`와 `getStaticPaths` 메서드가 중요한 역할을 한다.

```javascript
export async function getStaticProps({ params }) {
  const post = await getPostBySlug(params.slug);
  return { props: { post } };
}

export async function getStaticPaths() {
  const posts = await getAllPosts();
  return {
    paths: posts.map((post) => ({
      params: { slug: post.slug },
    })),
    fallback: false,
  };
}
```

## 4. React 컴포넌트에서의 렌더링

Next.js는 React 기반이므로, JSON 데이터는 React 컴포넌트 내에서 렌더링된다. 이 과정에서 `dangerouslySetInnerHTML` 메서드가 사용되어 HTML 내용을 안전하게 렌더링한다.

```jsx
const Post = ({ post }) => {
  return (
    <article>
      <h1>{post.title}</h1>
      <div dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  );
};
```


## 5. Tailwind CSS로 HTML 스타일링

HTML로 변환된 내용은 Tailwind CSS를 사용하여 스타일링된다. Tailwind CSS의 `@tailwindcss/typography` 플러그인이 자동으로 기본 HTML 요소에 스타일을 적용한다.

```jsx
import 'tailwindcss/tailwind.css';

const Post = ({ post }) => {
  return (
    <article className="prose prose-lg mx-auto">
      <h1>{post.title}</h1>
      <div dangerouslySetInnerHTML={{ __html: post.content }} />
    </article>
  );
};
```

Tailwind CSS는 JIT(Just-In-Time) 컴파일러를 사용하여 필요한 스타일만 생성한다.

## 6. 최종 정적 HTML 생성 및 배포

마지막으로, Next.js는 모든 정보를 종합하여 정적 HTML 파일을 생성한다. 이 파일들은 CDN을 통해 전 세계로 배포되어 빠른 로딩 속도를 제공한다.
